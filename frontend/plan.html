<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Trip Planner | Incredible India</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
    --primary-color: #ff6700;
    --secondary-color: #046A38;
    --text-color: #333;
    --bg-color: #f8f9fa;
    --white-color: #ffffff;
    --border-radius: 12px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    overflow-x: hidden;
}

/* --- Navbar Styles --- */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 5%;
    background-color: var(--white-color);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
    position: relative;
    z-index: 1000;
}
.navbar .logo { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; }
.navbar .logo img { width: 40px; }
.navbar .logo h1 { font-size: 1.5rem; color: var(--primary-color); }
.navbar nav { display: flex; align-items: center; gap: 1.5rem; } /* Added gap */
.navbar nav a { color: var(--text-color); text-decoration: none; font-weight: 600; }

/* --- Language Selector --- */
.language-selector {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.8rem;
    font-weight: 600;
}
#language-select {
    padding: 0.3rem 0.5rem;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-family: inherit;
    font-size: 0.8rem;
}
/* --- End Language Selector --- */

.menu-icon {
    display: none;
    flex-direction: column;
    gap: 4px;
    cursor: pointer;
}
.menu-icon div {
    width: 25px;
    height: 3px;
    background-color: var(--primary-color); /* Changed color */
    border-radius: 2px;
    transition: all 0.3s ease-in-out;
}
/* Active state for hamburger */
.menu-icon.active div:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
.menu-icon.active div:nth-child(2) { opacity: 0; }
.menu-icon.active div:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }


/* --- Main Planner Layout --- */
.planner-container {
    display: flex;
    flex-grow: 1;
    padding: 2rem 5%;
    gap: 2rem;
}

/* --- Form Section --- */
.form-section {
    flex-basis: 40%;
    padding-right: 2rem;
    border-right: 1px solid #ddd;
}
.form-section h2 { font-size: 2rem; color: var(--primary-color); margin-bottom: 0.5rem; }
.form-section p { color: #666; margin-bottom: 2rem; }
#tripForm { display: flex; flex-direction: column; gap: 1.5rem; }
.input-group { position: relative; }
.input-group input { width: 100%; padding: 0.8rem 1rem 0.8rem 2.5rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; }
#tripForm button {
    background-color: var(--primary-color); color: var(--white-color); border: none; padding: 0.9rem;
    font-size: 1.1rem; font-weight: 600; border-radius: 8px; cursor: pointer;
    transition: background-color 0.3s ease;
}
#tripForm button:hover { background-color: #e65c00; }

.input-group::before {
    content: ''; position: absolute; left: 12px; top: 50%;
    transform: translateY(-50%); width: 20px; height: 20px;
    background-size: contain; opacity: 0.5; z-index: 2;
}
.input-group.interests::before { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23333" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>');}
.input-group.location::before { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23333" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>');}
.input-group.days::before { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23333" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>');}
.input-group.budget::before { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M5 12h14"/></svg>');}

/* --- Itinerary Section --- */
.itinerary-section {
    flex-basis: 60%;
    overflow-y: auto;
    padding-left: 1rem;
}
#itineraryResult {
    border: 2px dashed #ccc;
    border-radius: var(--border-radius);
    padding: 2rem;
    min-height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: black;
    transition: border-color 0.3s;
}
#itineraryResult.has-content {
    border-style: solid; border-color: #eee;
    justify-content: flex-start; align-items: flex-start; text-align: left;
}
#itineraryContent > * {
    opacity: 0;
    transform: translateY(15px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}
#itineraryContent > *.visible {
    opacity: 1;
    transform: translateY(0);
}
#itineraryContent h2 { color: var(--primary-color); margin-bottom: 1.5rem; }
#itineraryContent h3 { color: var(--secondary-color); margin-top: 1.5rem; margin-bottom: 0.8rem; padding-bottom: 0.5rem; border-bottom: 2px solid #eee; }
#itineraryContent ul { list-style: none; padding-left: 0; }
#itineraryContent li { margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative; }
#itineraryContent li::before { content: '✓'; color: var(--secondary-color); position: absolute; left: 0; font-weight: bold; }

#loadingSpinner {
    width: 50px; height: 50px; border: 5px solid #f3f3f3;
    border-top: 5px solid var(--primary-color); border-radius: 50%;
    animation: spin 1s linear infinite; margin: auto;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* --- Responsive Mobile --- */
@media (max-width: 992px) {
    .planner-container { flex-direction: column; gap: 1rem; padding: 1rem 5%; }
    .form-section { border-right: none; padding-right: 0; }
    .itinerary-section { padding-left: 0; max-height: 60vh; overflow-y: auto; border-top: 1px solid #ddd; padding-top: 1rem; }
    #itineraryResult { min-height: auto; }

    /* Mobile menu */
    .menu-icon { display: flex; }
    .navbar nav {
        display: none;
        position: absolute;
        top: 70px; /* Adjust if navbar height changes */
        right: 5%;
        background: var(--white-color);
        padding: 1rem;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border-radius: 8px;
        flex-direction: column;
        align-items: flex-start; /* Align items left */
        gap: 0.5rem; /* Reduce gap */
        width: auto; /* Let content determine width */
        min-width: 180px; /* Set a minimum width */
    }
    .navbar nav a, .navbar nav .language-selector { /* Include selector */
        margin: 0.5rem 0;
        width: 100%; /* Make items full width */
        text-align: left; /* Align text left */
        padding: 0.5rem 0; /* Add some padding */
    }
     .navbar nav .language-selector {
         justify-content: space-between; /* Space out label and select */
     }
    .navbar nav.active { display: flex; }
}
</style>
</head>
<body>

<header class="navbar">
    <a href="index.html" class="logo">
        <img src="https://img.icons8.com/color/48/lotus.png" alt="Logo">
        <h1 data-i18n="app-title">Incredible India</h1>
    </a>
    <div class="menu-icon" id="menuIcon">
        <div></div>
        <div></div>
        <div></div>
    </div>
    <nav id="navbarNav">
        <div class="language-selector">
            <label for="language-select" data-i18n="lang-label">Language:</label>
            <select id="language-select">
                <option value="en">English</option>
                <option value="hi">हिन्दी (Hindi)</option>
                <option value="ta">தமிழ் (Tamil)</option>
                <option value="ml">മലയാളം (Malayalam)</option>
                <option value="te">తెలుగు (Telugu)</option>
                <option value="kn">ಕನ್ನಡ (Kannada)</option>
                <option value="bn">বাংলা (Bengali)</option>
                <option value="mr">मराठी (Marathi)</option>
            </select>
        </div>
        <a href="index.html" data-i18n="nav-home">Home</a>
         <a href="festivals.html" data-i18n="nav-festivals">Tourist Place Finder</a>
        <a href="map.html" data-i18n="nav-map">Map</a>
    </nav>
</header>

<main class="planner-container">
    <section class="form-section">
        <h2 data-i18n="planner-title">AI Trip Planner</h2>
        <p data-i18n="planner-subtitle">Tell us your preferences, and our AI will craft the perfect Indian adventure for you.</p>
        <form id="tripForm">
            <div class="input-group interests">
                <input type="text" id="interests" placeholder="e.g., temples, beaches, hiking" data-i18n-placeholder="placeholder-interests" required>
            </div>
            <div class="input-group location">
                <input type="text" id="location" placeholder="Specific location (e.g., Goa)" data-i18n-placeholder="placeholder-location">
            </div>
            <div class="input-group days">
                <input type="number" id="days" placeholder="Number of days" data-i18n-placeholder="placeholder-days" min="1" required>
            </div>
            <div class="input-group budget">
                <input type="number" id="budget" placeholder="Budget (₹)" data-i18n-placeholder="placeholder-budget" min="0" required>
            </div>
            <button type="submit" data-i18n="btn-generate">Generate Itinerary</button>
        </form>
    </section>

    <section class="itinerary-section">
        <div id="itineraryResult">
            <div id="placeholder"><h3 data-i18n="itinerary-placeholder">Your personalized itinerary will appear here...</h3></div>
            <div id="loadingSpinner" style="display:none;"></div>
            <div id="itineraryContent"></div>
        </div>
    </section>
</main>

<script>
// --- START TRANSLATION SCRIPT ---
const translations = {
  en: {
    'lang-label': 'Language:',
    'app-title': 'Incredible India',
    'nav-home': 'Home',
    'nav-map': 'Map',
    'nav-festivals': 'Tourist Place Finder', // Updated Text
    'planner-title': 'AI Trip Planner',
    'planner-subtitle': 'Tell us your preferences, and our AI will craft the perfect Indian adventure for you.',
    'placeholder-interests': 'e.g., temples, beaches, hiking',
    'placeholder-location': 'Specific location (e.g., Goa)',
    'placeholder-days': 'Number of days',
    'placeholder-budget': 'Budget (₹)',
    'btn-generate': 'Generate Itinerary',
    'itinerary-placeholder': 'Your personalized itinerary will appear here...',
    'error-general': 'An error occurred.',
    'error-connect': 'Could not connect to the server. Please try again later.',
    'title-planner': 'AI Trip Planner | Incredible India'
  },
  hi: {
    'lang-label': 'भाषा:',
    'app-title': 'अतुल्य भारत',
    'nav-home': 'होम',
    'nav-map': 'नक्शा',
    'nav-festivals': 'पर्यटक स्थल खोजक', // Updated Text
    'planner-title': 'AI यात्रा योजनाकार',
    'planner-subtitle': 'हमें अपनी पसंद बताएं, और हमारा AI आपके लिए एकदम सही भारतीय साहसिक यात्रा तैयार करेगा।',
    'placeholder-interests': 'उदा., मंदिर, समुद्र तट, लंबी पैदल यात्रा',
    'placeholder-location': 'विशिष्ट स्थान (उदा., गोवा)',
    'placeholder-days': 'दिनों की संख्या',
    'placeholder-budget': 'बजट (₹)',
    'btn-generate': 'यात्रा कार्यक्रम बनाएं',
    'itinerary-placeholder': 'आपका व्यक्तिगत यात्रा कार्यक्रम यहां दिखाई देगा...',
    'error-general': 'एक त्रुटि हुई।',
    'error-connect': 'सर्वर से कनेक्ट नहीं हो सका। कृपया बाद में पुनः प्रयास करें।',
    'title-planner': 'AI यात्रा योजनाकार | अतुल्य भारत'
  },
  ta: {
    'lang-label': 'மொழி:',
    'app-title': 'நம்பமுடியாத இந்தியா',
    'nav-home': 'முகப்பு',
    'nav-map': 'வரைபடம்',
    'nav-festivals': 'சுற்றுலா இட கண்டுபிடிப்பாளர்', // Updated Text
    'planner-title': 'AI பயணத் திட்டமிடுபவர்',
    'planner-subtitle': 'உங்கள் விருப்பங்களை எங்களிடம் கூறுங்கள், எங்கள் AI உங்களுக்கான சரியான இந்திய சாகசத்தை உருவாக்கும்.',
    'placeholder-interests': 'எ.கா., கோயில்கள், கடற்கரைகள், நடைபயணம்',
    'placeholder-location': 'குறிப்பிட்ட இடம் (எ.கா., கோவா)',
    'placeholder-days': 'நாட்களின் எண்ணிக்கை',
    'placeholder-budget': 'வரவு செலவு (₹)',
    'btn-generate': 'பயணத்திட்டத்தை உருவாக்கவும்',
    'itinerary-placeholder': 'உங்கள் தனிப்பயனாக்கப்பட்ட பயணத்திட்டம் இங்கே தோன்றும்...',
    'error-general': 'ஒரு பிழை ஏற்பட்டது.',
    'error-connect': 'சேவையகத்துடன் இணைக்க முடியவில்லை. தயவுசெய்து பின்னர் மீண்டும் முயற்சிக்கவும்.',
    'title-planner': 'AI பயணத் திட்டமிடுபவர் | நம்பமுடியாத இந்தியா'
  },
  ml: {
    'lang-label': 'ഭാഷ:',
    'app-title': 'അവിശ്വസനീയമായ ഇന്ത്യ',
    'nav-home': 'ഹോം',
    'nav-map': 'മാപ്പ്',
    'nav-festivals': 'ടൂറിസ്റ്റ് പ്ലേസ് ഫൈൻഡർ', // Updated Text
    'planner-title': 'AI ട്രിപ്പ് പ്ലാനർ',
    'planner-subtitle': 'നിങ്ങളുടെ മുൻഗണനകൾ ഞങ്ങളോട് പറയുക, ഞങ്ങളുടെ AI നിങ്ങൾക്കായി മികച്ച ഇന്ത്യൻ സാഹസികയാത്ര തയ്യാറാക്കും.',
    'placeholder-interests': 'ഉദാ., ക്ഷേത്രങ്ങൾ, ബീച്ചുകൾ, ഹൈക്കിംഗ്',
    'placeholder-location': 'പ്രത്യേക സ്ഥലം (ഉദാ., ഗോവ)',
    'placeholder-days': 'ദിവസങ്ങളുടെ എണ്ണം',
    'placeholder-budget': 'ബജറ്റ് (₹)',
    'btn-generate': 'യാത്രാവിവരണം ഉണ്ടാക്കുക',
    'itinerary-placeholder': 'നിങ്ങളുടെ വ്യക്തിഗത യാത്രാവിവരണം ഇവിടെ ദൃശ്യമാകും...',
    'error-general': 'ഒരു പിശക് സംഭവിച്ചു.',
    'error-connect': 'സെർവറുമായി ബന്ധിപ്പിക്കാൻ കഴിഞ്ഞില്ല. ദയവായി പിന്നീട് വീണ്ടും ശ്രമിക്കുക.',
    'title-planner': 'AI ട്രിപ്പ് പ്ലാനർ | അവിശ്വസനീയമായ ഇന്ത്യ'
  },
  te: {
    'lang-label': 'భాష:',
    'app-title': 'అవిశ్వసనీయమైన భారతదేశం',
    'nav-home': 'హోమ్',
    'nav-map': 'మ్యాప్',
    'nav-festivals': 'పర్యాటక స్థల ఫైండర్', // Updated Text
    'planner-title': 'AI ట్రిప్ ప్లానర్',
    'planner-subtitle': 'మీ ప్రాధాన్యతలను మాకు తెలియజేయండి, మరియు మా AI మీ కోసం సరైన భారతీయ సాహస యాత్రను రూపొందిస్తుంది.',
    'placeholder-interests': 'ఉదా., దేవాలయాలు, బీచ్‌లు, హైకింగ్',
    'placeholder-location': 'నిర్దిష్ట ప్రదేశం (ఉదా., గోవా)',
    'placeholder-days': 'రోజుల సంఖ్య',
    'placeholder-budget': 'బడ్జెట్ (₹)',
    'btn-generate': 'యాత్ర ప్రణాళికను రూపొందించండి',
    'itinerary-placeholder': 'మీ వ్యక్తిగతీకరించిన యాత్ర ప్రణాళిక ఇక్కడ కనిపిస్తుంది...',
    'error-general': 'లోపం సంభవించింది.',
    'error-connect': 'సర్వర్‌కు కనెక్ట్ కాలేదు. దయచేసి తర్వాత మళ్లీ ప్రయత్నించండి.',
    'title-planner': 'AI ట్రిప్ ప్లానర్ | అవిశ్వసనీయమైన భారతదేశం'
  },
  kn: {
    'lang-label': 'ಭಾಷೆ:',
    'app-title': 'ಅದ್ಭುತ ಭಾರತ',
    'nav-home': 'ಮುಖಪುಟ',
    'nav-map': 'ನಕ್ಷೆ',
    'nav-festivals': 'ಪ್ರವಾಸಿ ಸ್ಥಳ ಶೋಧಕ', // Updated Text
    'planner-title': 'AI ಟ್ರಿಪ್ ಪ್ಲಾನರ್',
    'planner-subtitle': 'ನಿಮ್ಮ ಆದ್ಯತೆಗಳನ್ನು ನಮಗೆ ತಿಳಿಸಿ, ಮತ್ತು ನಮ್ಮ AI ನಿಮಗಾಗಿ ಪರಿಪೂರ್ಣ ಭಾರತೀಯ ಸಾಹಸವನ್ನು ರಚಿಸುತ್ತದೆ.',
    'placeholder-interests': 'ಉದಾ., ದೇವಾಲಯಗಳು, ಕಡಲತೀರಗಳು, ಪಾದಯಾತ್ರೆ',
    'placeholder-location': 'ನಿರ್ದಿಷ್ಟ ಸ್ಥಳ (ಉದಾ., ಗೋವಾ)',
    'placeholder-days': 'ದಿನಗಳ ಸಂಖ್ಯೆ',
    'placeholder-budget': 'ಬಜೆಟ್ (₹)',
    'btn-generate': 'ಪ್ರವಾಸವನ್ನು ರಚಿಸಿ',
    'itinerary-placeholder': 'ನಿಮ್ಮ ವೈಯಕ್ತಿಕಗೊಳಿಸಿದ ಪ್ರವಾಸ ಇಲ್ಲಿ ಕಾಣಿಸುತ್ತದೆ...',
    'error-general': 'ದೋಷವೊಂದು ಸಂಭವಿಸಿದೆ.',
    'error-connect': 'ಸರ್ವರ್‌ಗೆ ಸಂಪರ್ಕಿಸಲು ಸಾಧ್ಯವಾಗಲಿಲ್ಲ. ದಯವಿಟ್ಟು ನಂತರ ಮತ್ತೆ ಪ್ರಯತ್ನಿಸಿ.',
    'title-planner': 'AI ಟ್ರಿಪ್ ಪ್ಲಾನರ್ | ಅದ್ಭುತ ಭಾರತ'
  },
  bn: {
    'lang-label': 'ভাষা:',
    'app-title': 'অবিশ্বাস্য ভারত',
    'nav-home': 'হোম',
    'nav-map': 'মানচিত্র',
    'nav-festivals': 'পর্যটন স্থান ফাইন্ডার', // Updated Text
    'planner-title': 'AI ট্রিপ প্ল্যানার',
    'planner-subtitle': 'আপনার পছন্দগুলি আমাদের বলুন, এবং আমাদের AI আপনার জন্য নিখুঁত ভারতীয় অ্যাডভেঞ্চার তৈরি করবে।',
    'placeholder-interests': 'যেমন, মন্দির, সমুদ্র সৈকত, হাইকিং',
    'placeholder-location': 'নির্দিষ্ট স্থান (যেমন, গোয়া)',
    'placeholder-days': 'দিনের সংখ্যা',
    'placeholder-budget': 'বাজেট (₹)',
    'btn-generate': 'ভ্রমণসূচী তৈরি করুন',
    'itinerary-placeholder': 'আপনার ব্যক্তিগতকৃত ভ্রমণসূচী এখানে প্রদর্শিত হবে...',
    'error-general': 'একটি ত্রুটি ঘটেছে।',
    'error-connect': 'সার্ভারের সাথে সংযোগ স্থাপন করা যায়নি। অনুগ্রহ করে পরে আবার চেষ্টা করুন।',
    'title-planner': 'AI ট্রিপ প্ল্যানার | অবিশ্বাস্য ভারত'
  },
  mr: {
    'lang-label': 'भाषा:',
    'app-title': 'अतुल्य भारत',
    'nav-home': 'होम',
    'nav-map': 'नकाशा',
    'nav-festivals': 'पर्यटन स्थळ शोधक', // Updated Text
    'planner-title': 'AI ट्रिप प्लॅनर',
    'planner-subtitle': 'तुमच्या आवडीनिवडी सांगा, आणि आमचे AI तुमच्यासाठी परिपूर्ण भारतीय साहस तयार करेल.',
    'placeholder-interests': 'उदा., मंदिरे, समुद्रकिनारे, हायकिंग',
    'placeholder-location': 'विशिष्ट ठिकाण (उदा., गोवा)',
    'placeholder-days': 'दिवसांची संख्या',
    'placeholder-budget': 'बजेट (₹)',
    'btn-generate': 'प्रवासाची योजना तयार करा',
    'itinerary-placeholder': 'तुमची वैयक्तिक प्रवासाची योजना येथे दिसेल...',
    'error-general': 'त्रुटी आली.',
    'error-connect': 'सर्व्हरशी कनेक्ट होऊ शकले नाही. कृपया नंतर पुन्हा प्रयत्न करा.',
    'title-planner': 'AI ट्रिप प्लॅनर | अतुल्य भारत'
  }
};

const languageSelect = document.getElementById('language-select');

const updateContent = (lang) => {
    const currentTranslations = translations[lang];
    if (!currentTranslations) return; // Exit if language not found

    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (currentTranslations[key]) {
            element.textContent = currentTranslations[key];
        }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        if (currentTranslations[key]) {
            element.placeholder = currentTranslations[key];
        }
    });

    document.title = currentTranslations['title-planner'];
};

languageSelect.addEventListener('change', (e) => {
    updateContent(e.target.value);
});

// --- END TRANSLATION SCRIPT ---

document.addEventListener('DOMContentLoaded', () => {
    updateContent('en'); // Initialize with English

    const tripForm = document.getElementById('tripForm');
    const itineraryResultDiv = document.getElementById('itineraryResult');
    const placeholder = document.getElementById('placeholder');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const itineraryContent = document.getElementById('itineraryContent');
    const backendUrl = 'https://toursim-dy8l.onrender.com'; // Make sure this matches your backend URL

    // Mobile menu toggle
    const menuIcon = document.getElementById('menuIcon');
    const navbarNav = document.getElementById('navbarNav');
    menuIcon.addEventListener('click', () => {
        navbarNav.classList.toggle('active');
        menuIcon.classList.toggle('active'); // Also toggle active class on icon for animation
    });

    tripForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const interests = document.getElementById('interests').value;
        const location = document.getElementById('location').value;
        const days = document.getElementById('days').value;
        const budget = document.getElementById('budget').value;
        const selectedLang = languageSelect.value;
        const currentTranslations = translations[selectedLang] || translations.en; // Fallback to English for errors

        placeholder.style.display = 'none';
        itineraryContent.innerHTML = '';
        loadingSpinner.style.display = 'block';
        itineraryResultDiv.classList.remove('has-content');

        try {
            const response = await fetch(`${backendUrl}/api/plan-trip`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ interests, days, budget, location, language: selectedLang })
            });

            const result = await response.json();
            loadingSpinner.style.display = 'none';

            if (response.ok) {
                itineraryResultDiv.classList.add('has-content');
                itineraryContent.innerHTML = result.itinerary;

                // Animate the result content
                const elementsToAnimate = itineraryContent.querySelectorAll('h2, h3, ul, p');
                let delay = 100;
                elementsToAnimate.forEach(element => {
                    setTimeout(() => element.classList.add('visible'), delay);
                    delay += 150;
                });
            } else {
                placeholder.style.display = 'block';
                placeholder.innerHTML = `<h3 style="color: red;">${result.message || currentTranslations['error-general']}</h3>`;
            }
        } catch (error) {
            console.error('Failed to generate itinerary:', error);
            loadingSpinner.style.display = 'none';
            placeholder.style.display = 'block';
            placeholder.innerHTML = `<h3 style="color: red;">${currentTranslations['error-connect']}</h3>`;
        }
    });
});
</script>
</body>

</html>
